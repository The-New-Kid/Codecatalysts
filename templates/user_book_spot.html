{% extends "user_layout.html" %}
{% block title %}Book Parking Spot{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto mt-12 px-4" data-aos="fade-up">
  
  <!-- Page Title -->
  <h2 class="text-3xl font-extrabold text-center text-indigo-700 mb-8">Book a Parking Spot</h2>

  <!-- Lot Type Toggle -->
  <div class="flex justify-center gap-4 mb-6">
    <!-- Public -->
    <form method="GET" action="{{ url_for('book_spot', user_id=user.id) }}">
      <input type="hidden" name="user_id" value="{{ user.id }}">
      <input type="radio" name="lot_type" value="public" id="publicRadio" class="hidden"
             {% if lot_type != 'private' %}checked{% endif %} onchange="this.form.submit()">
      <label for="publicRadio" class="px-6 py-2 rounded-full font-semibold cursor-pointer transition duration-200
            {% if lot_type != 'private' %}bg-indigo-600 text-white{% else %}bg-gray-200 text-gray-700{% endif %}">
        Public
      </label>
    </form>

    <!-- Private -->
    <form method="GET" action="{{ url_for('book_spot', user_id=user.id) }}">
      <input type="hidden" name="user_id" value="{{ user.id }}">
      <input type="radio" name="lot_type" value="private" id="privateRadio" class="hidden"
             {% if lot_type == 'private' %}checked{% endif %} onchange="this.form.submit()">
      <label for="privateRadio" class="px-6 py-2 rounded-full font-semibold cursor-pointer transition duration-200
            {% if lot_type == 'private' %}bg-indigo-600 text-white{% else %}bg-gray-200 text-gray-700{% endif %}">
        Private
      </label>
    </form>
  </div>

  <!-- Booking Form -->
  <div class="bg-white shadow-lg rounded-2xl p-6 hover:shadow-2xl transition duration-300">
    <form method="POST" action="{{ url_for('book_spot', user_id=user.id, lot_type=lot_type) }}" class="space-y-4">
      
      <!-- Select Location -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Select Location</label>
        <select name="lot_id" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400" required>
          <option value="">-- Choose Location --</option>
          {% for lot in lots %}
            <option value="{{ lot.id }}">{{ lot.prime_location_name }} - {{ lot.address }}, {{ lot.pin_code }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Vehicle Number -->
      <div>
        <label class="block text-gray-700 font-semibold mb-1">Vehicle Number</label>
        <input type="text" name="vehicle_number" placeholder="Enter Vehicle Number"
               class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400" required>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end">
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-2 rounded-xl transition duration-200">
          Book Spot
        </button>
      </div>

    </form>
  </div>

</div>

<script>
  AOS.init({ duration: 800, easing: 'ease-in-out', once: true });
</script>
{% endblock %}
